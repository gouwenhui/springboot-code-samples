(this["webpackJsonpstu-shop-manager"]=this["webpackJsonpstu-shop-manager"]||[]).push([[0],{221:function(e,t,a){},326:function(e,t,a){e.exports=a(716)},331:function(e,t,a){},332:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},333:function(e,t,a){},495:function(e,t,a){},713:function(e,t,a){},716:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),l=a.n(o),c=(a(331),a(332),a(221),a(222),a(23)),i=a(727),u=a(722),s=a(724),m=a(728),d=a(7),p=a(93),f=a(55);a(333);function g(){return localStorage.getItem("token")}var E=a(306),h=a.n(E).a.create({baseURL:"http://192.168.43.206:8080/shop-manager-backend-0.0.1",timeout:5e3});function v(e,t){return h.get(e,{params:t})}function y(e,t){return h.post(e,t)}h.interceptors.request.use((function(e){return e.headers.authorization="Bearer "+g(),e}),(function(e){return Promise.reject(e)})),h.interceptors.response.use((function(e){return e.data}),(function(e){return Promise.reject(e)}));var b=s.a.create({name:"loginForm"})((function(e){var t=e.form.getFieldDecorator,a=function(t){t.preventDefault(),e.form.validateFields((function(t,a){var n;t||(console.log("Received values of form: ",a),(n={username:a.username,password:a.password},y("/api/v1/auth/login",n)).then((function(t){var a;console.log(t),200===t.code?(i.a.success("\u767b\u5f55\u6210\u529f"),a=t.data,localStorage.setItem("token",a),e.history.push("/admin")):i.a.info(t.message)})).catch((function(e){console.log("Error:"+e),i.a.error(""+e)})))}))};return r.a.createElement(u.a,{title:"QF Admin SYS",className:"login-form"},r.a.createElement(s.a,{onSubmit:function(e){return a(e)}},r.a.createElement(s.a.Item,null,t("username",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d!"}]})(r.a.createElement(m.a,{prefix:r.a.createElement(d.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u7528\u6237\u540d"}))),r.a.createElement(s.a.Item,null,t("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801!"}]})(r.a.createElement(m.a,{prefix:r.a.createElement(d.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u5bc6\u7801"}))),r.a.createElement(s.a.Item,null,t("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(p.a,null,"\u8bb0\u4f4f\u6211")),r.a.createElement(f.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"\u767b\u5f55"))))})),S=a(726),w=a(96),k=a(50);var O=function(){var e=S.a.Countdown,t=Date.now()+1728e5+3e4;return r.a.createElement(u.a,{title:"\u770b\u677f"},r.a.createElement(w.a,{gutter:16},r.a.createElement(k.a,{span:12},r.a.createElement(S.a,{title:"Active Users",value:112893})),r.a.createElement(k.a,{span:12},r.a.createElement(S.a,{title:"Account Balance (CNY)",value:112893,precision:2}),r.a.createElement(f.a,{style:{marginTop:16},type:"primary"},"Recharge"))),r.a.createElement("br",null),r.a.createElement(w.a,{gutter:16},r.a.createElement(k.a,{span:12},r.a.createElement(e,{title:"Countdown",value:t,onFinish:function(){console.log("finished!")}})),r.a.createElement(k.a,{span:12},r.a.createElement(e,{title:"Million Seconds",value:t,format:"HH:mm:ss:SSS"})),r.a.createElement(k.a,{span:24,style:{marginTop:32}},r.a.createElement(e,{title:"Day Level",value:t,format:"D \u5929 H \u65f6 m \u5206 s \u79d2"}))),r.a.createElement("br",null),r.a.createElement("div",{style:{background:"#ECECEC",padding:"30px"}},r.a.createElement(w.a,{gutter:16},r.a.createElement(k.a,{span:12},r.a.createElement(u.a,null,r.a.createElement(S.a,{title:"Active",value:11.28,precision:2,valueStyle:{color:"#3f8600"},prefix:r.a.createElement(d.a,{type:"arrow-up"}),suffix:"%"}))),r.a.createElement(k.a,{span:12},r.a.createElement(u.a,null,r.a.createElement(S.a,{title:"Idle",value:9.3,precision:2,valueStyle:{color:"#cf1322"},prefix:r.a.createElement(d.a,{type:"arrow-down"}),suffix:"%"}))))))},I=a(718),C=a(723);function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return v("/api/v1/admin/products",{pageNum:e,pageSize:t})}function j(e,t){return function(e,t){return h.put(e,t)}("/api/v1/admin/products/".concat(e),t)}function z(e,t){return a="/api/v1/admin/products/".concat(e),h.delete(a);var a}a(495);var A=a(66),D=a(213),L=a.n(D),T=a(316),N=function(e){return function(){var t=Object(T.a)(L.a.mark((function t(a){var n;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.next=3,x(e.page,e.size);case 3:n=t.sent,a({type:"PRODUCT_LOADED",payload:n});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};var R=Object(A.b)((function(e){return e.product}))((function(e){var t=e.list,a=e.page,o=e.total;Object(n.useEffect)((function(){e.dispatch(N({page:1,size:5}))}),[]);var l=function(t,a){console.log("page:"+t+", pageSize:"+a),e.dispatch(N({page:t,size:a}))},c=[{title:"\u5e8f\u53f7",key:"id",width:80,align:"center",render:function(e,t,a){return a+1}},{title:"\u540d\u5b57",dataIndex:"name"},{title:"\u4e3b\u56fe",dataIndex:"coverImg",render:function(e,t,a){return t.coverImg?r.a.createElement("img",{src:"http://192.168.43.206"+t.coverImg,alt:t.name,style:{width:"120px"}}):"\u6682\u65e0\u56fe\u7247"}},{title:"\u4ef7\u683c",dataIndex:"price"},{title:"\u662f\u5426\u5728\u552e",dataIndex:"onSale",render:function(e,t){return t.onSale?"\u5728\u552e":"\u5df2\u4e0b\u67b6"}},{title:"\u64cd\u4f5c",render:function(t,n,o){return r.a.createElement("div",null,r.a.createElement(f.a,{type:"primary",size:"small",onClick:function(){return e.history.push("/admin/products/edit/".concat(n.id))}},"\u4fee\u6539"),r.a.createElement(I.a,{title:"\u786e\u5b9a\u5220\u9664\u6b64\u9879\uff1f",onCancel:function(){return console.log("\u7528\u6237\u53d6\u6d88\u5220\u9664")},onConfirm:function(){z(n.id).then((function(e){l(a)}))}},r.a.createElement(f.a,{style:{margin:"0 1rem"},type:"danger",size:"small"},"\u5220\u9664")),r.a.createElement(f.a,{size:"small",onClick:function(){j(n.id,{name:n.name,price:n.price,onSale:n.onSale?0:1}).then((function(e){l(a)}))}},n.onSale?"\u4e0b\u67b6":"\u4e0a\u67b6"))}}];return r.a.createElement(u.a,{title:"\u5546\u54c1\u5217\u8868",extra:r.a.createElement(f.a,{type:"primary",size:"small",onClick:function(){return e.history.push("/admin/products/edit")}},"\u65b0\u589e")},r.a.createElement(C.a,{rowKey:"id",rowClassName:function(e){return e.onSale?"":"bg-red"},pagination:{defaultCurrent:1,total:o,defaultPageSize:2,showSizeChanger:!0,onShowSizeChange:l,onChange:function(t,a){console.log("page:"+t+", pageSize:"+a),e.dispatch(N({page:t,size:a}))}},columns:c,bordered:!0,dataSource:t}))})),_=a(80),F=a(112),H=a(721),U=a(152),M=a.n(U);a(675);var P=s.a.create({name:"productEdit"})((function(e){console.log(e);var t=e.form.getFieldDecorator,a=Object(n.useState)([]),o=Object(F.a)(a,2),l=o[0],c=o[1],p=Object(n.useState)(""),E=Object(F.a)(p,2),h=E[0],b=E[1],S=Object(n.useState)(!1),w=Object(F.a)(S,2),k=w[0],O=w[1],I=Object(n.useState)(M.a.createEditorState("")),C=Object(F.a)(I,2),x=C[0],z=C[1];Object(n.useEffect)((function(){var t;e.match.params.id&&(t=e.match.params.id,v("/api/v1/admin/products/".concat(t))).then((function(e){console.log(e),c(e.data),b(e.data.coverImg),z(M.a.createEditorState(e.data.content))})).catch((function(e){console.log(e)}))}),[]);var A=r.a.createElement("div",null,r.a.createElement(d.a,{type:k?"loading":"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload")),D=function(t){console.log(t),t.preventDefault(),e.form.validateFieldsAndScroll((function(t,a){var n;t||(console.log("\u63d0\u4ea4"),e.match.params.id?j(e.match.params.id,Object(_.a)({},a,{coverImg:h,content:x.toHTML()})).then((function(t){console.log(t),200===t.code?(i.a.info(t.message),e.history.push("/admin/products")):i.a.error(t.message)})).catch((function(e){console.log(e)})):(n=Object(_.a)({},a,{coverImg:h,content:x.toHTML()}),y("/api/v1/admin/products",n)).then((function(t){console.log(t),200===t.code?(i.a.info(t.message),e.history.push("/admin/products")):i.a.error(t.message)})).catch((function(e){console.log(e)})))}))};return r.a.createElement(u.a,{title:"\u5546\u54c1\u7f16\u8f91",extra:r.a.createElement(f.a,{type:"default",size:"small",onClick:function(){return e.history.push("/admin/products")}},"\u8fd4\u56de")},r.a.createElement(s.a,{onSubmit:function(e){return D(e)}},r.a.createElement(s.a.Item,{label:"\u540d\u5b57"},t("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u5b57"}],initialValue:l.name})(r.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u540d\u5b57"}))),r.a.createElement(s.a.Item,{label:"\u4ef7\u683c"},t("price",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c"},{validator:function(e,t,a){console.log("value:"+t),1*t>100?a("\u4ef7\u683c\u4e0d\u80fd\u5927\u4e8e100"):a()}}],initialValue:l.price})(r.a.createElement(m.a,{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u4ef7\u683c"}))),r.a.createElement(s.a.Item,{label:"\u4e3b\u56fe"},r.a.createElement(H.a,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"http://192.168.43.206:8080/shop-manager-backend-0.0.1/api/v1/admin/products/file_upload",onChange:function(e){return function(e){"uploading"!==e.file.status?"done"===e.file.status&&(O(!1),console.log("upload sucess:"+e),b(e.file.response.data)):O(!0)}(e)},headers:{authorization:"Bearer "+g()}},h?r.a.createElement("img",{src:"http://192.168.43.206"+h,alt:"avatar",style:{width:"100%"}}):A)),r.a.createElement(s.a.Item,{label:"\u8be6\u60c5"},r.a.createElement(M.a,{value:x,onChange:function(e){z(e)}})),r.a.createElement(s.a.Item,null,r.a.createElement(f.a,{htmlType:"submit",type:"primary"},"\u4fdd\u5b58"))))})),q=a(729),B=a(725);var V=[{path:"/login",component:b},{path:"/404",component:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"404"))}}],J=[{path:"/admin/dashboard",component:O,isShow:!0,title:"\u770b\u677f",icon:"area-chart"},{path:"/admin/products",component:R,isShow:!0,exact:!0,title:"\u5546\u54c1\u7ba1\u7406",icon:"shop"},{path:"/admin/products/edit/:id?",component:P,isShow:!1},{path:"/admin/notices",component:Object(A.b)((function(e){return e}))((function(e){return r.a.createElement(u.a,{title:"\u901a\u77e5\u4e2d\u5fc3",extra:r.a.createElement(f.a,{size:"small",onClick:function(){return e.dispatch({type:"READ_ALL"})}},"\u5168\u90e8\u5df2\u8bfb")},r.a.createElement(q.a,{header:r.a.createElement("div",null,"Header"),footer:r.a.createElement("div",null,"Footer"),bordered:!0,dataSource:["Racing car sprays burning fuel into crowd.","Japanese princess to wed commoner.","Australian walks 100km after outback crash.","Man charged over missing wedding girl.","Los Angeles battles huge wildfires."],renderItem:function(e){return r.a.createElement(q.a.Item,{style:{display:"flex",alignContent:"spaced-between"}},r.a.createElement(B.a.Text,{mark:!0},"[ITEM]")," ",e,r.a.createElement(f.a,{size:"small"},"\u5df2\u8bfb"))}}))})),isShow:!1}],K=a(218),W=a(719),X=a(147),Y=a(720),Q=a(730),$=(a(713),K.a.SubMenu,W.a.Header),G=W.a.Content,Z=W.a.Footer,ee=W.a.Sider,te=J.filter((function(e){return e.isShow}));var ae=Object(A.b)((function(e){return e.notice}))(Object(c.g)((function(e){console.log(e);var t=r.a.createElement(K.a,{onClick:function(t){"logOut"==t.key?(localStorage.removeItem("token"),e.history.push("/login")):"noti"==t.key&&e.history.push("/admin/notices")}},r.a.createElement(K.a.Item,{key:"noti"},"\u901a\u77e5\u4e2d\u5fc3"),r.a.createElement(K.a.Item,{key:"setting"},"\u8bbe\u7f6e"),r.a.createElement(K.a.Item,{key:"logOut"},"\u9000\u51fa"));return r.a.createElement(W.a,null,r.a.createElement($,{className:"header",style:{backgroundColor:"#428bca"}},r.a.createElement("div",{className:"logo"}),r.a.createElement(X.a,{overlay:t},r.a.createElement("div",null,r.a.createElement(Y.a,null,"U"),r.a.createElement(Q.a,{dot:!e.isAllRead}," ",r.a.createElement("span",{style:{color:"#fff"}},"\u8d85\u7ea7\u7ba1\u7406\u5458")),r.a.createElement(d.a,{type:"down"})))),r.a.createElement(G,{style:{padding:"0 50px"}},r.a.createElement(W.a,{style:{padding:"24px 0",background:"#fff"}},r.a.createElement(ee,{width:200,style:{background:"#fff"}},r.a.createElement(K.a,{mode:"inline",defaultSelectedKeys:["1"],defaultOpenKeys:["sub1"],style:{height:"100%"}},te.map((function(t){return r.a.createElement(K.a.Item,{key:t.path,onClick:function(t){return e.history.push(t.key)}},r.a.createElement(d.a,{type:t.icon}),t.title)})))),r.a.createElement(G,{style:{margin:0,minHeight:280}},e.children))),r.a.createElement(Z,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED"))})));var ne=function(){return localStorage.getItem("token")?r.a.createElement(ae,null,r.a.createElement(c.d,null,J.map((function(e){return r.a.createElement(c.b,{key:e.path,path:e.path,exact:e.exact,render:function(t){return r.a.createElement(e.component,t)}})})),r.a.createElement(c.a,{to:J[0].path,from:"/admin"}),r.a.createElement(c.a,{to:"/404"}))):r.a.createElement(c.a,{to:"/login"})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=a(137),oe=a(81),le=a(324),ce=Object(oe.c)({product:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[],page:1,total:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_LOADED":return Object(_.a)({},e,{list:t.payload.data.list,page:t.payload.data.current,total:t.payload.data.total});default:return e}},notice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isAllRead:!1,count:9},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"READ_ALL":return Object(_.a)({},e,{isAllRead:!0});default:return e}}}),ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||oe.d,ue=Object(oe.e)(ce,ie(Object(oe.a)(le.a)));K.a.SubMenu,W.a.Header,W.a.Content,W.a.Footer,W.a.Sider;l.a.render(r.a.createElement(A.a,{store:ue},r.a.createElement(re.a,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:"/admin",render:function(e){return r.a.createElement(ne,e)}}),V.map((function(e){return r.a.createElement(c.b,Object.assign({key:e.path},e))})),r.a.createElement(c.a,{to:"/admin",from:"/"}),r.a.createElement(c.a,{to:"/404"})))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[326,1,2]]]);
//# sourceMappingURL=main.696dd7d1.chunk.js.map